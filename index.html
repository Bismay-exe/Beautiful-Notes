<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Beautiful Notes — Minimal App (Blur + Rounded)</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg0: #08080a;
    --bg1: linear-gradient(180deg, #0b0b0d 0%, #0f0f12 100%);
    --card: rgba(255,255,255,0.03);
    --glass: rgba(255,255,255,0.04);
    --muted: rgba(255,255,255,0.62);
    --accent: #f5f5f7;
    --accent-2: #ff7aa2;
    --success: #7be495;
    --radius: 24px;             /* increased radius */
    --pill-radius: 999px;
    color-scheme: dark;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:
      radial-gradient(800px 400px at 10% 10%, rgba(255,255,255,0.02), transparent 8%),
      var(--bg1);
    color:var(--accent);
    -webkit-font-smoothing:antialiased;
    padding:20px;
  }

  /* Layout */
  .app {
    max-width:1100px;margin:0 auto;display:grid;grid-template-columns: 360px 1fr; gap:22px;
  }

  /* Sidebar */
  .sidebar{
    background: linear-gradient(180deg, rgba(255,255,255,0.025), rgba(255,255,255,0.015));
    border-radius:calc(var(--radius) + 6px); /* more rounded */
    padding:18px;border:1px solid rgba(255,255,255,0.035);
    height:calc(100vh - 40px);overflow:auto;
    backdrop-filter: blur(14px) saturate(1.08); /* stronger blur */
    -webkit-backdrop-filter: blur(14px);
    box-shadow: 0 20px 50px rgba(0,0,0,0.65);
    transition: transform .28s ease, box-shadow .28s ease;
  }
  .sidebar:hover { transform: translateY(-4px); box-shadow: 0 30px 70px rgba(0,0,0,0.72); }
  .brand{display:flex;align-items:center;gap:14px;margin-bottom:14px}
  .logo{
    width:54px;height:54px;border-radius:14px;display:flex;align-items:center;justify-content:center;
    font-weight:800;font-size:20px;background:linear-gradient(135deg,#ffffff06,#ffffff02);
    border:1px solid rgba(255,255,255,0.03); box-shadow: inset 0 -8px 20px rgba(255,255,255,0.02);
  }
  .brand h1{font-size:18px;margin:0}
  .brand p{margin:0;font-size:13px;color:var(--muted)}

  .controls{display:flex;gap:10px;margin:14px 0;align-items:center}
  .search{
    flex:1;padding:10px 14px;border-radius:14px;border:1px solid rgba(255,255,255,0.03);
    background: rgba(255,255,255,0.02);color:var(--accent);outline:none;
    backdrop-filter: blur(6px);
  }
  .btn{
    padding:9px 14px;border-radius:14px;border:1px solid rgba(255,255,255,0.03);
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    cursor:pointer;font-weight:700;color:var(--accent);
    transition: transform .16s ease, filter .16s ease;
  }
  .btn:active{ transform: translateY(1px) scale(.997); }
  .btn.ghost{background:transparent}
  .tags{display:flex;flex-wrap:wrap;gap:8px;margin:12px 0}
  .tag{
    padding:7px 12px;border-radius:var(--pill-radius);background:rgba(255,255,255,0.02);
    font-size:13px;color:var(--muted);cursor:pointer;border:1px solid rgba(255,255,255,0.02);
    transition: transform .12s ease, box-shadow .12s ease;
  }
  .tag:hover{ transform: translateY(-4px); box-shadow: 0 8px 18px rgba(0,0,0,0.45); }
  .tag.active{background:var(--accent-2);color:#111; box-shadow: 0 12px 30px rgba(255,122,162,0.08);}

  .note-list{display:flex;flex-direction:column;gap:12px;margin-top:8px}
  .note-card{
    padding:14px;border-radius:18px;background:linear-gradient(180deg, rgba(255,255,255,0.018), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.03);cursor:pointer;transition:transform .18s, box-shadow .18s;
    display:flex;flex-direction:column;gap:8px;
    backdrop-filter: blur(10px);
  }
  .note-card:hover{transform:translateY(-8px);box-shadow:0 26px 56px rgba(0,0,0,0.65)}
  .note-title{font-weight:800}
  .note-meta{font-size:12px;color:var(--muted)}

  /* Main editor / viewer */
  .main{
    height:calc(100vh - 40px);overflow:hidden;display:flex;flex-direction:column;
  }
  .toolbar{
    display:flex;align-items:center;gap:10px;padding:14px;border-radius:18px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
    margin-bottom:6px;
  }
  .editor-area{
    flex:1;display:grid;grid-template-columns: 1fr 1fr; gap:20px;padding:12px;overflow:auto;
  }
  .pane{
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008));
    border-radius:20px;padding:18px;border:1px solid rgba(255,255,255,0.03);min-height:220px;overflow:auto;
    backdrop-filter: blur(14px) saturate(1.05);
    -webkit-backdrop-filter: blur(14px);
    box-shadow: 0 14px 36px rgba(0,0,0,0.55);
    transition: transform .18s ease, box-shadow .18s ease;
  }
  .pane:focus-within{ transform: translateY(-4px); box-shadow: 0 28px 60px rgba(0,0,0,0.6); }
  textarea{
    width:100%;height:100%;min-height:180px;background:transparent;border:none;outline:none;color:var(--accent);
    font-family:inherit;font-size:15px;resize:none;
  }
  .note-preview{color:var(--accent);line-height:1.55}
  .note-preview h1{font-size:22px;margin:0 0 8px}
  .note-preview h2{font-size:18px;margin:10px 0}
  .note-preview p{margin:6px 0;color:var(--muted)}
  .note-preview code{background: rgba(0,0,0,0.45);padding:3px 8px;border-radius:8px;font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,monospace}

  /* Floating FAB */
  .fab{
    position:fixed;right:28px;bottom:28px;width:72px;height:72px;border-radius:22px;
    background:linear-gradient(135deg,#ff7aa2,#ffb0c9);display:flex;align-items:center;justify-content:center;
    font-weight:800;color:#111;font-size:30px;cursor:pointer;
    box-shadow:0 26px 80px rgba(0,0,0,0.7);border:5px solid rgba(255,255,255,0.04);
    transition: transform .18s ease, box-shadow .18s ease;
  }
  .fab:hover{ transform: translateY(-6px) scale(1.02); box-shadow:0 36px 110px rgba(0,0,0,0.75); }

  /* Modals */
  .modal-backdrop{
    position:fixed;inset:0;background:rgba(2,6,12,0.55);display:none;align-items:center;justify-content:center;padding:20px;z-index:60;
    backdrop-filter: blur(8px);
  }
  .modal{
    width:100%;max-width:920px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    padding:20px;border-radius:24px;border:1px solid rgba(255,255,255,0.04);box-shadow:0 40px 100px rgba(0,0,0,0.7);
    backdrop-filter: blur(12px);
  }
  .row{display:flex;gap:8px;align-items:center}
  .small{font-size:13px;color:var(--muted)}

  /* responsive */
  @media (max-width:980px){
    .app{grid-template-columns: 1fr; padding-bottom:100px}
    .editor-area{grid-template-columns:1fr}
    .sidebar{height:auto}
    .fab{right:18px;bottom:18px}
  }

  /* subtle animations */
  .fade-in{animation:fadeIn .28s ease both}
  @keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}

  /* small helpers */
  a{color:inherit}
  .hidden{display:none}
</style>
</head>
<body>
  <div class="app">
    <aside class="sidebar fade-in" aria-label="Sidebar">
      <div class="brand">
        <div class="logo">✦</div>
        <div>
          <h1>Beautiful Notes</h1>
          <p class="small">Smooth • Glass • Rounded</p>
        </div>
      </div>

      <div class="controls">
        <input id="search" class="search" placeholder="Search notes or content (press Ctrl/Cmd+F)" />
        <button id="newBtn" class="btn" title="New note">New</button>
      </div>

      <div class="row small" style="justify-content:space-between">
        <div>Tags</div>
        <div class="small">Sort:
          <select id="sortSel" style="background:transparent;border:none;color:var(--accent);font-weight:600">
            <option value="recent">Recent</option>
            <option value="alpha">Title A→Z</option>
          </select>
        </div>
      </div>

      <div class="tags" id="tagContainer">
        <!-- tags injected -->
      </div>

      <div class="note-list" id="noteList" aria-live="polite">
        <!-- notes injected -->
      </div>

      <div style="margin-top:12px;display:flex;gap:8px">
        <button id="exportBtn" class="btn ghost">Export</button>
        <button id="importBtn" class="btn ghost">Import</button>
      </div>
    </aside>

    <main class="main">
      <div class="toolbar">
        <div style="flex:1">
          <strong id="mainTitle">Select or create a note</strong>
          <div class="small" id="noteInfo"></div>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <button id="copyBtn" class="btn ghost small">Copy</button>
          <button id="fullscreenBtn" class="btn ghost small">Read</button>
          <button id="deleteBtn" class="btn ghost small" style="color:#ff8aa0">Delete</button>
        </div>
      </div>

      <div class="editor-area">
        <div class="pane">
          <textarea id="editor" placeholder="Start writing... (supports simple markdown: #, ##, **bold**, *italic*, `code`, links)" spellcheck="true"></textarea>
        </div>
        <div class="pane note-preview" id="preview" aria-live="polite">
          <!-- rendered preview -->
          <p class="small" style="color:var(--muted)">Preview will appear here...</p>
        </div>
      </div>
    </main>
  </div>

  <div class="fab" id="fab" title="New note">+</div>

  <!-- Import hidden file input -->
  <input type="file" id="importFile" accept="application/json" style="display:none" />

  <!-- Fullscreen read modal -->
  <div class="modal-backdrop" id="readModal" role="dialog" aria-modal="true">
    <div class="modal" id="readContent">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <h2 id="readTitle" style="margin:0"></h2>
          <div class="small" id="readMeta"></div>
        </div>
        <div>
          <button id="closeRead" class="btn">Close</button>
        </div>
      </div>
      <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:12px 0" />
      <div id="readBody" style="max-height:70vh;overflow:auto"></div>
    </div>
  </div>

<script>
/* -------------------------
   Storage & data model
   ------------------------- */
const LS_KEY = 'beautiful_notes_v1';
function nowISO(){ return new Date().toISOString(); }

let state = {
  notes: [], // {id, title, body, tags:[], createdAt, updatedAt}
  filter: { q:'', tag:null, sort:'recent' }
};

function loadState(){
  try{
    const raw = localStorage.getItem(LS_KEY);
    if(!raw) return;
    const parsed = JSON.parse(raw);
    state.notes = parsed.notes || [];
  }catch(e){ console.error('load failed', e) }
}
function saveState(){
  localStorage.setItem(LS_KEY, JSON.stringify({notes: state.notes}));
}

/* -------------------------
   Utilities
   ------------------------- */
function uid(len=8){ return Math.random().toString(36).slice(2,2+len); }
function truncate(s, n=80){ return s.length>n ? s.slice(0,n-1)+'…' : s }
function extractTitle(body){
  const lines = (body||'').trim().split(/\n/).filter(Boolean);
  if(lines.length === 0) return 'Untitled';
  return lines[0].replace(/^#+\s*/,'').slice(0,80);
}
function allTags(){
  const set = new Set();
  state.notes.forEach(n => (n.tags||[]).forEach(t=>set.add(t)));
  return Array.from(set).sort();
}

/* -------------------------
   Simple markdown-ish parser (lightweight)
   Supports: #, ##, **bold**, *italic*, `code`, [link](url)
   ------------------------- */
function renderMarkdown(md){
  if(!md) return '<p class="small" style="color:var(--muted)">No content</p>';
  const esc = (s)=>s.replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[c]));
  let html = esc(md);

  html = html.replace(/```([\s\S]*?)```/g, (m,code)=>`<pre style="background:rgba(0,0,0,0.45);padding:10px;border-radius:10px;overflow:auto"><code>${esc(code)}</code></pre>`);

  html = html.replace(/^\s*######\s?(.*)$/gm, '<h6>$1</h6>');
  html = html.replace(/^\s*#####\s?(.*)$/gm, '<h5>$1</h5>');
  html = html.replace(/^\s*####\s?(.*)$/gm, '<h4>$1</h4>');
  html = html.replace(/^\s*###\s?(.*)$/gm, '<h3>$1</h3>');
  html = html.replace(/^\s*##\s?(.*)$/gm, '<h2>$1</h2>');
  html = html.replace(/^\s*#\s?(.*)$/gm, '<h1>$1</h1>');

  html = html.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>');
  html = html.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');
  html = html.replace(/\*([^*]+)\*/g, '<em>$1</em>');
  html = html.replace(/`([^`]+)`/g, '<code>$1</code>');

  const parts = html.split(/\n{2,}/).map(p => p.trim()).filter(Boolean);
  return parts.map(p => {
    if(/^(<h|<pre|<ul|<ol|<blockquote|<p|<div)/.test(p)) return p;
    return '<p>' + p.replace(/\n/g,'<br>') + '</p>';
  }).join('');
}

/* -------------------------
   Rendering UI
   ------------------------- */
const noteListEl = document.getElementById('noteList');
const tagContainer = document.getElementById('tagContainer');
const editor = document.getElementById('editor');
const preview = document.getElementById('preview');
const mainTitle = document.getElementById('mainTitle');
const noteInfo = document.getElementById('noteInfo');

function renderSidebar(){
  tagContainer.innerHTML = '';
  const tags = allTags();
  const allTagEl = document.createElement('div');
  allTagEl.className='tag' + (state.filter.tag === null ? ' active' : '');
  allTagEl.textContent = 'All';
  allTagEl.onclick = ()=>{ state.filter.tag = null; renderAll(); };
  tagContainer.appendChild(allTagEl);

  tags.forEach(t=>{
    const el = document.createElement('div');
    el.className = 'tag' + (state.filter.tag === t ? ' active' : '');
    el.textContent = t;
    el.onclick = ()=>{ state.filter.tag = (state.filter.tag === t ? null : t); renderAll(); };
    tagContainer.appendChild(el);
  });

  const q = state.filter.q.toLowerCase().trim();
  let list = state.notes.slice();
  if(q) list = list.filter(n => (n.title||'').toLowerCase().includes(q) || (n.body||'').toLowerCase().includes(q));
  if(state.filter.tag) list = list.filter(n => (n.tags||[]).includes(state.filter.tag));
  if(state.filter.sort === 'recent') list.sort((a,b)=> new Date(b.updatedAt || b.createdAt) - new Date(a.updatedAt || a.createdAt));
  else if(state.filter.sort === 'alpha') list.sort((a,b)=> (a.title||'').localeCompare(b.title||''));
  noteListEl.innerHTML = '';
  if(list.length === 0){
    const p = document.createElement('div');
    p.className = 'small';
    p.textContent = 'No notes yet — click New to create one.';
    noteListEl.appendChild(p);
  }else{
    list.forEach(n => {
      const card = document.createElement('div');
      card.className = 'note-card fade-in';
      const t = document.createElement('div'); t.className='note-title'; t.textContent = n.title || extractTitle(n.body);
      const m = document.createElement('div'); m.className='note-meta small'; m.textContent = `${new Date(n.updatedAt||n.createdAt).toLocaleString()} • ${ (n.tags||[]).join(', ') }`;
      const excerpt = document.createElement('div'); excerpt.className='small'; excerpt.style.color='var(--muted)'; excerpt.textContent = truncate(n.body.replace(/\n/g,' '), 120);
      card.appendChild(t); card.appendChild(m); card.appendChild(excerpt);
      card.onclick = ()=>selectNote(n.id);
      noteListEl.appendChild(card);
    });
  }
}

function renderPreviewText(text){
  preview.innerHTML = renderMarkdown(text);
}

/* -------------------------
   Note lifecycle
   ------------------------- */
let activeNoteId = null;
let autosaveTimer = null;
function createNote(prefill=''){
  const id = uid(10);
  const title = extractTitle(prefill);
  const note = { id, title, body: prefill, tags: [], createdAt: nowISO(), updatedAt: nowISO() };
  state.notes.unshift(note);
  saveState(); renderAll();
  selectNote(id);
  editor.focus();
}
function selectNote(id){
  const n = state.notes.find(x=>x.id===id);
  if(!n) return;
  activeNoteId = id;
  editor.value = n.body || '';
  renderPreviewText(n.body || '');
  mainTitle.textContent = n.title || extractTitle(n.body);
  noteInfo.textContent = `Updated: ${new Date(n.updatedAt||n.createdAt).toLocaleString()} • Tags: ${(n.tags||[]).join(', ') || '—'}`;
}
function saveActiveNote(){
  if(!activeNoteId) return;
  const n = state.notes.find(x=>x.id===activeNoteId);
  if(!n) return;
  const newBody = editor.value;
  n.body = newBody;
  n.title = extractTitle(newBody);
  n.updatedAt = nowISO();
  const tagLine = (newBody.match(/^\s*tags:\s*(.+)$/im) || [])[1];
  if(tagLine) n.tags = tagLine.split(',').map(s=>s.trim()).filter(Boolean);
  saveState();
  renderAll();
}

/* -------------------------
   Delete / copy / fullscreen
   ------------------------- */
function deleteActiveNote(){
  if(!activeNoteId) return;
  const idx = state.notes.findIndex(x=>x.id===activeNoteId);
  if(idx === -1) return;
  if(!confirm('Delete this note?')) return;
  state.notes.splice(idx,1);
  activeNoteId = null;
  saveState(); renderAll();
  editor.value=''; preview.innerHTML='<p class="small" style="color:var(--muted)">Preview will appear here...</p>';
  mainTitle.textContent = 'Select or create a note';
  noteInfo.textContent = '';
}
function copyActive(){
  if(!activeNoteId) return;
  const n = state.notes.find(x=>x.id===activeNoteId);
  navigator.clipboard.writeText(n.body || '').then(()=>{ toast('Copied note to clipboard') }).catch(()=>{ toast('Copy failed') });
}
function openRead(){
  if(!activeNoteId) return;
  const n = state.notes.find(x=>x.id===activeNoteId);
  document.getElementById('readTitle').textContent = n.title || extractTitle(n.body);
  document.getElementById('readMeta').textContent = `Updated ${new Date(n.updatedAt||n.createdAt).toLocaleString()}`;
  document.getElementById('readBody').innerHTML = renderMarkdown(n.body || '');
  const modal = document.getElementById('readModal');
  modal.style.display = 'flex';
  document.getElementById('closeRead').focus();
}
function closeRead(){
  document.getElementById('readModal').style.background = 'rgba(0,0,0,0.55)';
  document.getElementById('readModal').style.display = 'none';
}

/* -------------------------
   Export / Import
   ------------------------- */
function exportNotes(){
  const data = { notes: state.notes, exportedAt: nowISO() };
  const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = `beautiful-notes-${(new Date()).toISOString().slice(0,10)}.json`; a.click();
  setTimeout(()=>URL.revokeObjectURL(url), 5000);
}
function importNotes(file){
  const reader = new FileReader();
  reader.onload = (e)=>{
    try{
      const parsed = JSON.parse(e.target.result);
      if(!Array.isArray(parsed.notes)) return alert('Invalid file');
      const existingIds = new Set(state.notes.map(n=>n.id));
      parsed.notes.forEach(n=>{
        if(!existingIds.has(n.id)) state.notes.push(n);
      });
      saveState(); renderAll();
      toast('Imported notes');
    }catch(err){ alert('Import failed: ' + err.message) }
  };
  reader.readAsText(file);
}

/* -------------------------
   Tiny toast
   ------------------------- */
function toast(msg, ms=1400){
  const t = document.createElement('div');
  t.textContent = msg;
  t.style.position='fixed'; t.style.left='50%'; t.style.bottom='22px';
  t.style.transform='translateX(-50%)'; t.style.padding='10px 14px'; t.style.borderRadius='999px';
  t.style.background='rgba(0,0,0,0.6)'; t.style.color='white'; t.style.zIndex=9999; t.style.fontWeight=700;
  document.body.appendChild(t);
  setTimeout(()=>t.style.opacity='0', ms-220);
  setTimeout(()=>t.remove(), ms);
}

/* -------------------------
   Event bindings & autosave
   ------------------------- */
document.getElementById('newBtn').addEventListener('click', ()=>createNote(''));
document.getElementById('fab').addEventListener('click', ()=>createNote(''));
document.getElementById('search').addEventListener('input', (e)=>{ state.filter.q = e.target.value; renderAll(); });
document.getElementById('sortSel').addEventListener('change', (e)=>{ state.filter.sort = e.target.value; renderAll(); });
document.getElementById('copyBtn').addEventListener('click', copyActive);
document.getElementById('fullscreenBtn').addEventListener('click', openRead);
document.getElementById('closeRead').addEventListener('click', closeRead);
document.getElementById('deleteBtn').addEventListener('click', deleteActiveNote);
document.getElementById('exportBtn').addEventListener('click', exportNotes);
document.getElementById('importBtn').addEventListener('click', ()=>document.getElementById('importFile').click());
document.getElementById('importFile').addEventListener('change', (e)=>{ if(e.target.files[0]) importNotes(e.target.files[0]); });

editor.addEventListener('input', ()=>{
  renderPreviewText(editor.value);
  if(autosaveTimer) clearTimeout(autosaveTimer);
  autosaveTimer = setTimeout(()=>{ saveActiveNote(); toast('Saved'); }, 850);
});

/* keyboard shortcuts */
document.addEventListener('keydown', (e)=>{
  if(e.key === 'N' || (e.key === 'n' && e.ctrlKey)) { e.preventDefault(); createNote(''); }
  if(e.key === 'Escape') { closeRead(); }
  if((e.ctrlKey || e.metaKey) && e.key === 's'){ e.preventDefault(); saveActiveNote(); toast('Saved'); }
});

/* click outside read modal closes */
document.getElementById('readModal').addEventListener('click', (e)=>{ if(e.target === document.getElementById('readModal')) closeRead(); });

/* -------------------------
   Initialize
   ------------------------- */
function renderAll(){
  renderSidebar();
  renderPreviewText(editor.value);
}

/* Load and show */
loadState();
// Ensure createdAt/updatedAt exist on older entries
state.notes.forEach(n=>{ if(!n.createdAt) n.createdAt = nowISO(); if(!n.updatedAt) n.updatedAt = n.createdAt; });
if(state.notes.length > 0){
  renderSidebar();
  selectNote(state.notes[0].id);
} else {
  renderSidebar();
}
renderAll();

/* small helpful welcome */
if(state.notes.length === 0) {
  createNote('# Welcome\n\nThis is a beautiful notes app.\n\n- Press **New** or the + button to create a note\n- Use `tags: work,ideas` (on a line) to add tags\n\nHappy writing ✨');
  toast('Tip: write a line "tags: tag1, tag2" to add tags automatically');
}
</script>
</body>
</html>
